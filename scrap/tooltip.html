<!doctype html>
<html lang="en">
<head>
    <title>Tooltips of the world</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <style>
         h2 {
            font-size: 1.5rem;
         }   
        .toggletip-container {
            position: relative;
            display: inline-block;
        }
        
        .toggletip-bubble {
            display: inline-block;
            position: absolute;
            left: 100%;
            top: 0;
            width: 10em;
            padding: 0.5rem;
            background: #000;
            color: #fff;
        }
        
        a {
            text-decoration: underline;
        }
        .panel {
            border:1px solid #ccc;
            padding:1em;
            border-radius: .25rem;
        }
        .round {
            border-radius: 1rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <br>
        <h1>Tooltips</h1>
        <h2>Framework tooltips for controls that "do" something</h2>
        <p>Boostrap OOTB Tooltip. It adheres to <a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Reference/Roles/tooltip_role"> MDN recommendations</a>
            
        </p>
        <ol>
            <li>user hovers or focuses</li>
            <li>script grabs the button's title attribute content</li>
            <li>script creates a container with <code>role="tooltip" </code>with an id and pumps the title content into it</li>
            <li>script adds an <code>aria-describedby</code> attr to the button, pointing to the container it has created</li>
            <li>script shows the tooltip</li>
            <li>tooltip is hidden when button looses focus or hover</li>
        </ol>
        <div class="panel panel-default">
            <div class="panel-body">
                <button type="button" class="btn btn-primary" data-toggle="tooltip" data-placement="left" title="Add a new item">
                    +
                </button>
                
            </div>
        </div>
        
        <br>
        <h2>No framework tooltips for controls that "do" something</h2>
        <p>Tooltip content as screen reader text inside the button and as screen reader hidden text in the tooltip</p>
        <div class="panel panel-default">
            <div class="panel-body">
                
                <button type="button" class="btn btn-danger x-tooltip">
                    -
                    <span class="sr-only">Delete this item</span>
                </button>
                <span class="tooltip-content" style="display:none" aria-hidden="true"> Delete this item</span>
            </div></div><br>
            <p>Note: the concatenation of the visible part of the name ('?') and
                the screen reader part of the name ('Tooltip content') needs to make sense. If the screen reader text is a replacement for the visible text, hide the visible text with <code> aria-hidden="true"</code></p>
                
                <h2>Tooltips for controls that only provide information</h2>
                <p>The above 2 examples are useful to clarify the purpose of a control that actually does something. If the aim is only to provide information this needs to be made clear to the user, and a different pattern used. What follows is addapted from Heydon Pickering, <a href="https://inclusive-components.design/tooltips-toggletips/">Tooltips & Toggletips</a></p>
                <ul>
                    <li>Name of the control expressly clarifies that it only provides more information - it does nothing else. In the example the accessible name is "more info" If there are a large number of these, the name should be disambiguated: "more info on (whatever)" </li>
                    <li>The context should make clear what the information relates to</li>
                    <li>User "opts into" receiving this information, so this is only provided by clicking it or hitting the Enter key</li>
                    <li>The information is provided via an ARIA live region</li>
                </ul>
                
                <div>
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <span class="toggletip-container">
                                <button type="button" class="btn btn-primary round" aria-label="more info" data-toggletip-content="This clarifies whatever needs clarifying">i</button>
                                <span role="status"></span>
                            </span>
                        </div></div>
                    </div>
                    <br>
                    <h2>Tooltip use</h2>
                    <ul>
                        <li>Use the right pattern above</li>
                        <li>If the information is important and there is enough real estate, make sure it is visible by default. Just provide clear labels and sufficient body text.</li>
                        <li>
                            Tooltip should persist till user dismisses it (moves mouse, moves focus). Tooltip display should not be timed.
                        </li>
                        <li>Tooltip should not contain any interactive elements. </li>
                        <li>Tooltip should be used only to provide clarifying information. Information that is central to the control being "tooltipped" should be visible without interaction</li>
                        <li>Tooltip information should not duplicate the visible information</li>
                        
                    </ul>
                    
                    
                    
                    
                    
                </div>
                
                
                <!-- Optional JavaScript -->
                <!-- jQuery first, then Popper.js, then Bootstrap JS -->
                <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
                <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
                
                <script>
                    $(function () {
                        $('[data-toggle="tooltip"]').tooltip();
                        
                        $('.x-tooltip').hover(function(){
                            $('.tooltip-content').toggle();
                        })
                        $('.x-tooltip').focus(function(){
                            $('.tooltip-content').toggle();
                        })
                        $('.x-tooltip').blur(function(){
                            $('.tooltip-content').hide();
                        })
                        
                    });
                    
                    (function() {
                        // Get all the toggletip buttons
                        var toggletips = document.querySelectorAll('[data-toggletip-content]');
                        
                        // Iterate over them
                        Array.prototype.forEach.call(toggletips, function (toggletip) {
                            // Get the message from the data-content element
                            var message = toggletip.getAttribute('data-toggletip-content');
                            
                            // Get the live region element
                            var liveRegion = toggletip.nextElementSibling;
                            
                            // Toggle the message
                            toggletip.addEventListener('click', function () {
                                liveRegion.innerHTML = '';
                                window.setTimeout(function() {
                                    liveRegion.innerHTML = '<span class="toggletip-bubble">'+ message +'</span>';
                                }, 100);
                            });
                            
                            // Close on outside click
                            document.addEventListener('click', function (e) {
                                if (toggletip !== e.target) {
                                    liveRegion.innerHTML = '';
                                }                        
                            });
                            
                            // Remove toggletip on ESC
                            toggletip.addEventListener('keydown', function(e) {
                                if ((e.keyCode || e.which) === 27)
                                liveRegion.innerHTML = '';
                            });
                        });
                    }()); 
                </script>
                
                
            </body>
            </html>